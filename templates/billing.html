<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Billing History</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="container">
        <header>
            <h1>Billing & Invoices</h1>
            <a href="/" class="secondary-btn">‚Üê Back to App</a>
        </header>

        <section class="card" style="margin-top:20px;">
            <h2>Current Plan: <span style="color:var(--primary)">{{ user.package.name }}</span></h2>
            <p>Credits Left: {{ user.credits_left }} | Voice Chars: {{ user.voice_chars_left }}</p>
            {% if user.package.id == 1 %}
            <a href="/pricing" class="primary-btn">Upgrade Plan</a>
            {% else %}
            <button class="secondary-btn">Manage Subscription</button>
            {% endif %}
        </section>

        <section style="margin-top:40px;">
            <h3>Transaction History</h3>
            <table style="width:100%; border-collapse:collapse; margin-top:10px;">
                <thead>
                    <tr style="text-align:left; border-bottom:1px solid #333;">
                        <th style="padding:10px;">Date</th>
                        <th style="padding:10px;">Package</th>
                        <th style="padding:10px;">Amount</th>
                        <th style="padding:10px;">Status</th>
                        <th style="padding:10px;">Invoice</th>
                    </tr>
                </thead>
                <tbody>
                    {% for txn in transactions %}
                    <tr style="border-bottom:1px solid #222;">
                        <td style="padding:10px;">{{ txn.timestamp.strftime('%Y-%m-%d') }}</td>
                        <td style="padding:10px;">{{ txn.package_name }}</td>
                        <td style="padding:10px;">${{ txn.amount }}</td>
                        <td style="padding:10px;">
                            <span class="tag" style="background: rgba(16, 185, 129, 0.2); color: #10b981;">{{ txn.status
                                }}</span>
                        </td>
                        <td style="padding:10px;">
                            <a href="#" style="color:#888;">Download PDF</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </section>
    </div>
</body>

</html>